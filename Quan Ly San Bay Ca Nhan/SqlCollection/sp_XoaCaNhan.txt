USE [QL_SANBAY_CN]
GO
/****** Object:  StoredProcedure [dbo].[sp_XoaCaNhan]    Script Date: 5/26/2023 11:36:41 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[sp_XoaCaNhan]
@OWNER_ID VARCHAR(10)
AS
BEGIN
	BEGIN TRANSACTION
		DECLARE @IDNGUOI INT
		SELECT @IDNGUOI = IDNGUOI FROM CANHAN WHERE OWNER_ID = @OWNER_ID

		DELETE FROM CANHAN WHERE OWNER_ID = @OWNER_ID
		DELETE FROM CHUMAYBAY WHERE OWNER_ID = @OWNER_ID
		DELETE FROM NGUOI WHERE IDNGUOI = @IDNGUOI
	COMMIT
END